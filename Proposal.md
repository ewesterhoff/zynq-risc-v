# Final Project Proposal - a RISC-V Processor for ZYNQ
#### Taylore Todd & Emma Westerhoff

## Overview
We will implement the RISC-V ISA within a soft-core processor on the Zybo Z7 Development Board (Zynq XC7Z010). This will be a simple CPU that is capable of running C programs compiled offline and booted off of the micro-SD card. It will be a 5-stage pipeline processor. It will access some of the peripherals on the Zybo board, including LED0-3, BTN0-3, and SWITCH0-3. It will provide a UART output over the USB port. 

## ISA Selection
We will start by implementing the RV32E instruction set, as it is a reduced instruction set optimized for embedded programming. 

## Methodology
1. We will start by implementing a basic 5-stage pipelined CPU in VHDL; Instruction Fetch, Instruction Decode, Execute, Memory Access, Register Write-Back. 
    - We will write tests for each instruction using Vivado Testbenches. 
2. We will connect / exercise the mentioned peripherals.
    - We will write tests for each type of peripheral using Vivado Testbenches.
3. We will test loading code onto the board. This will include copying compiled code off of the MicroSD card into memory and executing it.
    - We will manually write simple code to execute, and exercise some peripherals in the tested code. 
4. We will define / connect the startup procedure. This will include defining program setup and software initialization. 
    - We will compile simple code to exercise the LEDs to blink slowly depending on switch state. The blinking will be defined by software NOPs. 
5. We will connect the UART interface.
    - We will compile code to report the status of input peripherals like the buttons and switches via the UART interface.
6. We will upgrade to the RV32I instruction set, which will include GPR 16-32, and add support for floating point operations.
    - We will rerun the same simple code segments created for earlier tests.
7. We will implement timers & interrupts.
    - We will augment our test suite to include relevant capabilities.
8. We will augment/accelerate the floating point capabilities of the processor by adding an FPU to the design.
    - We will augment our test suite to include relevant capabilities, and use the timer functionality to collect benchmarking information.

## Benchmarking
We plan to compare the performance improvement generated by the addition of the FPU on a small set of benchmarking programs. These benchmarking programs will be selected specifically to showcase the improved floating point capabilities of the processor. We will measure our two designs both without and without a well-designed FPU, and show relative speedup.

## Deliverables / Demonstrations
We will provide a final written report detailing the implementation, and a demonstration of C-programs running on the board. We will closely detail any lacking functionality.

## Possible Extensions
The work outlined above is will be the minimum viable product. However, we have a list of extensions below that we would like to implement if we have time. They are in no particular order.

- Implementing a simple branch predictor
- Running a well-established benchmark suite
- Implementing more complex peripherals like HDMI OUT or Ethernet communication.
- TBD depending on interest of future class topics

## Resources
- [RISC V Instruction Set Manual](https://riscv.org/wp-content/uploads/2016/06/riscv-spec-v2.1.pdf)
